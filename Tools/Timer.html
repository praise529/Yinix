<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Links!!! ðŸ”— -->
    <link rel="stylesheet" href="../Index.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,500,0,0" />

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timer - Yinix</title>

    <style>
        #Timer {
            z-index: 1000;
            position: absolute;
            width: 386px;
            /* border-image: conic-gradient( var(--Main), var(--Secondary-Main), var(--Dark-White), var(--Main)) 1; */
        }
        #Timer h1 {
            display: inline-flex;
            flex-direction: row;
        }
        #Timer input[type="number"] {
            width: 120px;
            /* height: 60px; */
            font-size: 100px;
            font-weight: bold;
            text-align: center;
            border-radius: 10px;
            display: inline-flex;
            background: var(--White);
            border: 4px solid var(--White);
            align-items: center; justify-content: center;
        }
        #Timer input[type="number"]::-webkit-inner-spin-button,
        #Timer input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
        }
        #Timer input[type="number"]:hover {
            border: var(--Light-Border);
        }
        #Timer input[type="number"]:focus {
            outline: none;
            border: var(--Light-Border);
        }

        #Timer .Timer-Controls .Timer-Controls-Button {
            padding: 12px;
            border-radius: 500px;
            background: var(--White);
            color: var(--Text-Black);
            border: var(--Light-Border);
        }

        #Timer .Timer-Controls .Timer-Controls-Button#Timer-Play {
            border: none;
            color: #FFF;
            background: var(--Main);
        }
    </style>
</head>
<body class="Scroll-None">
    <div class="Tool-Box" id="Timer">
        <h2><span class="material-symbols-rounded">av_timer</span></h2>
        <h1 id="Time"><input type="number" id="Timer_Hours" onchange="Correct_Inputs()">:<input type="number" id="Timer_Minutes" onchange="Correct_Inputs()">:<input type="number" id="Timer_Seconds" onchange="Correct_Inputs()"></h1><br><br>

        <div class="Timer-Controls">
            <button class="Timer-Controls-Button" id="Timer-Plus-10"><span class="material-symbols-rounded">exposure_plus_2</span></button>
            <button class="Timer-Controls-Button" id="Timer-Play"><span class="material-symbols-rounded">play_arrow</span></button>
            <button class="Timer-Controls-Button" id="Timer-Restart" onclick="Reset()"><span class="material-symbols-rounded">replay</span></button>
        </div><br><br>

        <button onclick="Open_In_New_Window()"><span class="material-symbols-rounded">open_in_new</span> Open in new window</button>
    </div>

    <script>
        let Interval = null;
        let Timer_Hours = 0;
        let Timer_Minutes = 0;
        let Timer_Seconds = 0;
            
        const Timer_Play = document.getElementById("Timer-Play");
        const Timer_Hours_Element = document.getElementById("Timer_Hours");
        const Timer_Minutes_Element = document.getElementById("Timer_Minutes");
        const Timer_Seconds_Element = document.getElementById("Timer_Seconds");
            
        function PadStart(value) {
            return value.toString().padStart(2, "0");
        }

        function Update() {
            Timer_Hours_Element.value = PadStart(Timer_Hours);
            Timer_Minutes_Element.value = PadStart(Timer_Minutes);
            Timer_Seconds_Element.value = PadStart(Timer_Seconds);
        }

        function Correct_Inputs() {
            Timer_Hours = Math.min(99, Number(Timer_Hours_Element.value));
            Timer_Minutes = Math.min(59, Number(Timer_Minutes_Element.value));
            Timer_Seconds = Math.min(59, Number(Timer_Seconds_Element.value));
            Update();
        }

        function Count_Down() {
            if (Timer_Seconds > 0) {
                Timer_Seconds--;
            } else if (Timer_Minutes > 0) {
                Timer_Minutes--;
                Timer_Seconds = 59;
            } else if (Timer_Hours > 0) {
                Timer_Hours--;
                Timer_Minutes = 59;
                Timer_Seconds = 59;
            } else {
                Stop();
                return;
            }
            Update();
            document.title = `${PadStart(Timer_Hours)}:${PadStart(Timer_Minutes)}:${PadStart(Timer_Seconds)} - Timer - Yinix!`;
        }

        function Start() {
            if (Interval) return;
            Correct_Inputs();
            Timer_Play.innerHTML = `<span class="material-symbols-rounded">pause</span>`;
            Interval = setInterval(Count_Down, 1000);
        }

        function Stop() {
            clearInterval(Interval);
            Interval = null;
            Timer_Play.innerHTML = `<span class="material-symbols-rounded">play_arrow</span>`;
        }

        function Reset() {
            Stop();
            Timer_Hours = Timer_Minutes = Timer_Seconds = 0;
            Update();
        }

        Timer_Play.addEventListener("click", () => {
            Interval ? Stop() : Start();
        });

        Update();



        function Open_In_New_Window() {
            window.open("https://yinixx.vercel.app/Tools/Timer.html", "", "width=1000,height=1000");
        }
    </script>

</body>
</html>